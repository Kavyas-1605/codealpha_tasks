// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract MultiSend {

    // Main function to distribute Ether equally
    function sendEther(address[] memory recipients) public payable {
        require(recipients.length > 0, "No recipients provided");
        require(msg.value > 0, "No Ether sent");

        uint256 amountPerRecipient = msg.value / recipients.length;
        require(amountPerRecipient > 0, "Ether too small to distribute");

        // Loop through the array and send equal Ether
        for (uint i = 0; i < recipients.length; i++) {
            (bool success, ) = payable(recipients[i]).call{value: amountPerRecipient}("");
            require(success, "Transfer failed");
        }

        // If leftover Ether remains (due to rounding), refund to sender
        uint256 remainder = msg.value - (amountPerRecipient * recipients.length);
        if (remainder > 0) {
            (bool refundSuccess, ) = payable(msg.sender).call{value: remainder}("");
            require(refundSuccess, "Refund failed");
        }
    }
}
